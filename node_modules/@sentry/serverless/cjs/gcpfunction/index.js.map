{"version":3,"file":"index.js","sources":["../../../../src/gcpfunction/index.ts"],"sourcesContent":["import type { NodeOptions } from '@sentry/node';\nimport {\n  SDK_VERSION,\n  defaultIntegrations as defaultNodeIntegrations,\n  getDefaultIntegrations as getDefaultNodeIntegrations,\n  init as initNode,\n} from '@sentry/node';\nimport type { Integration, Options, SdkMetadata } from '@sentry/types';\n\nimport { googleCloudGrpcIntegration } from '../google-cloud-grpc';\nimport { googleCloudHttpIntegration } from '../google-cloud-http';\n\nexport * from './http';\nexport * from './events';\nexport * from './cloud_events';\n\n/** @deprecated Use `getDefaultIntegrations(options)` instead. */\nexport const defaultIntegrations: Integration[] = [\n  // eslint-disable-next-line deprecation/deprecation\n  ...defaultNodeIntegrations,\n  googleCloudHttpIntegration({ optional: true }), // We mark this integration optional since '@google-cloud/common' module could be missing.\n  googleCloudGrpcIntegration({ optional: true }), // We mark this integration optional since 'google-gax' module could be missing.\n];\n\n/** Get the default integrations for the GCP SDK. */\nexport function getDefaultIntegrations(options: Options): Integration[] {\n  return [\n    ...getDefaultNodeIntegrations(options),\n    googleCloudHttpIntegration({ optional: true }), // We mark this integration optional since '@google-cloud/common' module could be missing.\n    googleCloudGrpcIntegration({ optional: true }), // We mark this integration optional since 'google-gax' module could be missing.\n  ];\n}\n\n/**\n * @see {@link Sentry.init}\n */\nexport function init(options: NodeOptions = {}): void {\n  const opts = {\n    _metadata: {} as SdkMetadata,\n    defaultIntegrations: getDefaultIntegrations(options),\n    ...options,\n  };\n\n  opts._metadata.sdk = opts._metadata.sdk || {\n    name: 'sentry.javascript.serverless',\n    integrations: ['GCPFunction'],\n    packages: [\n      {\n        name: 'npm:@sentry/serverless',\n        version: SDK_VERSION,\n      },\n    ],\n    version: SDK_VERSION,\n  };\n\n  initNode(opts);\n}\n"],"names":["defaultNodeIntegrations","googleCloudHttpIntegration","googleCloudGrpcIntegration","getDefaultNodeIntegrations","SDK_VERSION","initNode"],"mappings":";;;;;;;;;AAgBA;AACO,MAAM,mBAAmB,GAAkB;AAClD;AACA,EAAE,GAAGA,wBAAuB;AAC5B,EAAEC,0CAA0B,CAAC,EAAE,QAAQ,EAAE,IAAA,EAAM,CAAC;AAChD,EAAEC,0CAA0B,CAAC,EAAE,QAAQ,EAAE,IAAA,EAAM,CAAC;AAChD,EAAC;AACD;AACA;AACO,SAAS,sBAAsB,CAAC,OAAO,EAA0B;AACxE,EAAE,OAAO;AACT,IAAI,GAAGC,2BAA0B,CAAC,OAAO,CAAC;AAC1C,IAAIF,0CAA0B,CAAC,EAAE,QAAQ,EAAE,IAAA,EAAM,CAAC;AAClD,IAAIC,0CAA0B,CAAC,EAAE,QAAQ,EAAE,IAAA,EAAM,CAAC;AAClD,GAAG,CAAA;AACH,CAAA;AACA;AACA;AACA;AACA;AACO,SAAS,IAAI,CAAC,OAAO,GAAgB,EAAE,EAAQ;AACtD,EAAE,MAAM,OAAO;AACf,IAAI,SAAS,EAAE,EAAG;AAClB,IAAI,mBAAmB,EAAE,sBAAsB,CAAC,OAAO,CAAC;AACxD,IAAI,GAAG,OAAO;AACd,GAAG,CAAA;AACH;AACA,EAAE,IAAI,CAAC,SAAS,CAAC,GAAA,GAAM,IAAI,CAAC,SAAS,CAAC,GAAA,IAAO;AAC7C,IAAI,IAAI,EAAE,8BAA8B;AACxC,IAAI,YAAY,EAAE,CAAC,aAAa,CAAC;AACjC,IAAI,QAAQ,EAAE;AACd,MAAM;AACN,QAAQ,IAAI,EAAE,wBAAwB;AACtC,QAAQ,OAAO,EAAEE,gBAAW;AAC5B,OAAO;AACP,KAAK;AACL,IAAI,OAAO,EAAEA,gBAAW;AACxB,GAAG,CAAA;AACH;AACA,EAAEC,SAAQ,CAAC,IAAI,CAAC,CAAA;AAChB;;;;;;;;;"}